---
layout: post
title: 范畴论
categories: [math]
tags: [math, cat, algebra]
tikz: true
svgzoom: 60%
---
这是一个非常trivial的范畴论笔记，目的是让我忘得尽量慢一些。我主要就直接抄李教主的书了。




<!--more-->

# 范畴论基础

## 范畴是什么

**范畴**$\mathcal{C}$由下面几个要素定义：[^1]
- 集合 $\mathrm{Ob}(\mathcal{C})$，其元素称作$\mathcal{C}$的**对象**.
- <p> 集合 $\mathrm{Mor}(\mathcal{C})$，其元素称作$\mathcal{C}$的<strong>态射</strong>，而且配上一对映射<br>
$$
\require{amscd}
\mathrm{Mor}(\mathcal{C})\underset{t}{\stackrel{s}{\rightrightarrows}}\mathrm{Ob}(\mathcal{C})
$$
其中$s,t$分别给出态射的来源和目标。对于$X,Y\in\mathrm{Ob}(\mathcal{C})$，记<br>
$$
\mathrm{Hom}_{\mathcal{C}}(X,Y):=s^{-1}(X)\cap t^{-1}(Y)
$$
称为Hom-集，其中的元素称为$X$到$Y$的态射。</p>
- <p>$\forall X\in\mathrm{Ob}(\mathcal{C})$，给定态射$\mathrm{id}_{X}\in\mathrm{Hom}_{\mathcal{C}}(X,X)$，称为$X$的<strong>恒等态射</strong>.</p>
- <p>$\forall X,Y,Z\in\mathrm{Ob}(\mathcal{C})$，给定态射之间的<strong>合成态射</strong><br>
$$
\begin{gathered}\circ:\mathrm{Hom}_{\mathcal{C}}(Y,Z)\times\mathrm{Hom}_{\mathcal{C}}(X,Y)\longrightarrow\mathrm{Hom}_{\mathcal{C}}(X,Z)\\(f,g)\longmapsto f\circ g\end{gathered}
$$
满足下面两条性质：<br>
$$
\begin{gathered}
f(gh)=(fg)h\\
\forall f\in\operatorname{Hom}_{\mathcal{C}}(X,Y),\quad f\circ \mathrm{id}_X=f=\mathrm{id}_Y\circ f
\end{gathered}
$$
注意上面第二个性质唯一确定了$\mathrm{id}_X$本身。</p>

简单点说范畴就是一堆对象加上他们之间的一些箭头，这个图像也方便我们引入**交换图表**来研究范畴论。一个带箭头的图表交换，就是说上面的箭头合成殊途同归。

对于态射$f:X\to Y$，若存在$g:Y\to X$使得：

$$
fg=\mathrm{id}_Y,\quad gf=\mathrm{id}_X
$$

则称$f:X\stackrel{\sim}{\to}Y$是同构，$g$称为$f$的逆，不难发现逆存在则唯一。从$X$到$Y$的同构集称为$\mathrm{Isom}_\mathcal{C}(X,Y)$。如果一个范畴中的所有映射都可逆，那么称其为**广群**。

另外还有两个比较重要的概念：

$$
\mathrm{End}_{\mathcal{C}}(X):=\mathrm{Hom}_{\mathcal{C}}(X,X),\quad\mathrm{Aut}_{\mathcal{C}}(X):=\mathrm{Isom}_{\mathcal{C}}(X,X)
$$

分别称为$X$的自同态集和自同构集，在$\circ$的乘法下，前者由于不一定可逆所以是幺半群，后者是群。

范畴$\mathcal{C}$的子范畴$\mathcal{C}^\prime$由下面的几条定义
- $\mathrm{Ob}(\mathcal{C}^{\prime})\subset\mathrm{Ob}(\mathcal{C})$
- $\mathrm{Mor}(\mathcal{C}^{\prime})\subset\mathrm{Mor}(\mathcal{C})$，并且保持恒等态射
- $\mathrm{Mor}(\mathcal{C}^\prime)\underset{t}{\stackrel{s}{\rightrightarrows}}\mathrm{Ob}(\mathcal{C}^\prime)$中的来源目标映射都由$\mathcal{C}$限制而来
- $\mathcal{C}^\prime$中态射的合成也由$\mathcal{C}$限制而来
<p>简单点的说法就是$\forall X,Y\in\mathrm{Ob}(\mathcal{C}^\prime)$有$\mathrm{Hom}_{\mathcal{C}^{\prime}}(X,Y)\subset\mathrm{Hom}_{\mathcal{C}}(X,Y)$，而且和态射的合成是兼容的，如果包含关系变成等号$\mathrm{Hom}_{\mathcal{C}^{\prime}}(X,Y)=\mathrm{Hom}_{\mathcal{C}}(X,Y)$，则称为全子范畴</p>

>从点与箭头的直观图像来看，子范畴就是子图。全子范畴就是导出子图

>例子：
>- $\mathrm{Grp}$称为群范畴，态射是群同态
>- $\mathrm{Ab}$称为交换群范畴，是群范畴的全子范畴
>- $\mathrm{Set}$称为集合范畴，是所有集合构成的范畴，态射定义为集合之间的映射。这个范畴就非常大了，而且涉及到集合论非常微妙的点，必须引入宇宙才行。
>- $\mathrm{Top}$ 称为拓扑范畴，是所有Hausdorff空间构成的范畴，态射就是拓扑空间之间的连续映射
>- $\mathrm{Vect}(\mathbb{F})$称为$\mathbb{F}$上线性空间构成的范畴，态射就是线性映射
>- 对于一个集合$S$，把其中的元素看成对象，把每个元素对应的恒等映射看成态射，这样定义了一个离散范畴$\mathrm{Disc}(S)$
>从这些例子可以看出，范畴有点像集合的集合，给不同集合之间赋予了一些关系。

对态射的单和满的讨论可以转换为下面的命题：
- $f$是单态射，如果$\forall Z\in\mathrm{Ob}(\mathcal{C}), g,h\in \mathrm{Hom}(Z,X)$，有$fg=fh\iff g=h$
- $f$是满态射，如果$\forall Z\in\mathrm{Ob}(\mathcal{C}), g,h\in \mathrm{Hom}(Z,X)$，有$gf=hf\iff g=h$

这也很好理解，只有当$f$是单的时候，它才可能存在左逆，满的时候才可能存在右逆。但是要注意，上面的图像时集合论给的，但是单和满的意义在不同范畴下与集合论意义下并不一定相同，而且既单又满即是同构这一说法也不对所有的范畴成立。

对于任何范畴，把所有的箭头全部换成反向的，也可以定义一个**反范畴***$\mathcal{C}^\mathrm{op}$：
- $\mathrm{Ob}(\mathcal{C}^{\mathrm{op}})=\mathrm{Ob}(\mathcal{C})$
- <p>$\forall X,Y\in\mathrm{Ob}(\mathcal{C})$，$\mathrm{Hom}_{\mathcal{C}^{\mathrm{op}}}(X,Y):=\mathrm{Hom}_{\mathcal{C}}(Y,X)$</p>
- <p>态射$f\in\mathrm{Hom}_{\mathcal{C}^{\mathrm{op}}}(Y,Z), g\in\mathrm{Hom}_{\mathcal{C}^{\mathrm{op}}}(X,Y)$在反范畴中的合成$f\circ^\mathrm{op} g$定义为范畴中的反向合成$g\circ f$</p>
- 恒等映射不变

任何一个范畴都有反范畴其实说明了范畴论的对偶原理，直接反转箭头，把单态射变成满的，满态射变成单的，这样子做范畴论的公理依然保持。

## 函子

函子简单来说就是把两个范畴联系起来，比如群的表示就是$\mathrm{Grp}\to\mathrm{Vect}(\mathbb{F})$的函子；还有群的abel化是$\mathrm{Grp}\to\mathrm{Abel}$的函子；还有基本群是从$\mathrm{Top}_{\bullet}\to\mathrm{Grp}$的函子。[^3]

对于范畴$\mathcal{C}^\prime,\mathcal{C}$，一个函子$F:\mathcal{C}^\prime\to\mathcal{C}$由下面定义：
- 对象间的映射$F:\mathrm{Ob}(\mathcal{C}^{\prime})\to\mathrm{Ob}(\mathcal{C})$[^2]
- <p>态射间的映射$F:\mathrm{Mor}(\mathcal{C}^{\prime})\to\mathrm{Mor}(\mathcal{C})$，且满足：
$$
\begin{gathered}
\forall X,Y\in\mathrm{Ob}(\mathcal{C}^\prime), F:\mathrm{Hom}_{\mathcal{C}^{\prime}}(X,Y)\to\mathrm{Hom}_{\mathcal{C}}(FX,FY)\\
F(q\circ f)=F(q)\circ F(f), F(\mathrm{id}_{X})=\mathrm{id}_{FX}
\end{gathered}
$$
第一个是在说点平移了，他们之间的箭头也会平移。第二个是表明了共变性。而对应的${(\mathcal{C}^\prime)}^{\mathrm{op}}\to\mathcal{\mathcal{C}}$的函子$F$称为反变函子，主要是因为$\circ^{\mathrm{op}}$是反着定义的。</p>

> 上面函子定义的第二点告诉我们一个非常重要的性质：
> 如果把交换图上每个箭头和结点都作用上函子，那么交换图仍交换

<p>函子映射箭头的过程中，可能出现“简并”，也就是两个箭头在$\mathcal{C}^\prime$在$\mathcal{C}$中被$F$映射为了同一个箭头。如果没有这种情况，则称$F$是<strong>忠实的</strong>，数学上严谨的说就是$\mathrm{Hom}_{\mathcal{C}^{\prime}}(X,Y)\overset{F}{\operatorname*{\to}}\mathrm{Hom}_{\mathcal{C}}(FX,FY)$对任意对象都是单射。</p>

<p>另外有可能有些箭头在$\mathcal{C}$里面有但是$\mathcal{C}^\prime$里面没有，也就是说有些$\mathcal{C}$里面的箭头没有通过$\mathcal{C}^\prime$中的某个箭头映射得到。如果没有这种情况发生，也就是$\mathrm{Hom}_{\mathcal{C}^{\prime}}(X,Y)\overset{F}{\operatorname*{\to}}\mathrm{Hom}_{\mathcal{C}}(FX,FY)$对任意对象都是满射，那么就说$F$是<strong>全的</strong>。</p>

另外$F$作用的时候可以把点简并一下，把图扭曲一下，这样就有可能让每个对象都有一堆互逆的箭头与某个$FX$相连，这样的$F$称为是**本质满**的，如果$\mathcal{C}$中的所有对象都同构于某个$FX$。

最简单的忠实函子是由子范畴导出的包含函子$\iota:\mathcal{C}^{\prime}\hookrightarrow\mathcal{C}$，它是全函子当且仅当$\mathcal{C}^\prime$是全子函子。如果取$\mathcal{C}^\prime=\mathcal{C}$，得到的称为恒等函子$\mathrm{id}_\mathcal{C}$

### 函子间的态射

态射这个词需要在范畴的语境下才能用，下一节会更加明确为何确确实实是态射。函子间的态射也可以叫做**自然变换**，这个词就不需要定义函子范畴后来说了。两个函子$F,G:\mathcal{C}^\prime\to\mathcal{C}$之间的自然变换$\theta$是由$\mathcal{C}$中的一簇映射的集合定义的：

$$
\theta_{X}\in\mathrm{Hom}_{\mathcal{C}}(FX,GX),\quad X\in\mathrm{Ob}(\mathcal{C}^{\prime})
$$

它对态射之间的变换便也是“逐点”定义的，要求就对任意的态射$f:X\to Y\in\mathrm{Mor}(\mathcal{C}^\prime)$下图交换：

$$
\begin{equation}
\label{1}
\begin{CD}
FX @>\theta_X>> GX\\
@VFfVV @VVGfV\\
FY @>>\theta_Y> GY
\end{CD}
\end{equation}
$$

这样定义的自然变换记为 $\theta:F\to G$，图解为：[^4]

<center>
<script  type="text/tikz">
	\begin{tikzcd}
	{\mathcal{C}^\prime} & {\mathcal{C}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "G"', bend right=50, from=1-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "F", bend left=50, from=1-1, to=1-2]
	\arrow["\theta", shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
	\end{tikzcd}
</script>
</center>


上面这种带$\Rightarrow$的图称为2-胞腔，上面交换图形式对$\theta$的定义很容易让人与$F\to G$的同伦联系起来。

### 自然变换的合成

#### 纵合成

考虑下图所示的三个函子之间的态射，现在的目标是找到$F\to H$的态射：

<center style="overflow:auto">
<script  type="text/tikz">
	\begin{tikzcd}
	{\mathcal{C}^\prime} && {\mathcal{C}} & \mathrm{\Rightarrow} & {\mathcal{C}^\prime} & {} & {\mathcal{C}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "H"', bend right=60, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "F", bend left=60, from=1-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "G"{description}, from=1-1, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "H"',  bend right=50, from=1-5, to=1-7]
	\arrow[""{name=4, anchor=center, inner sep=0}, "F",  bend left=50, from=1-5, to=1-7]
	\arrow["\psi", shorten <=2pt, shorten >=2pt, Rightarrow, from=2, to=0]
	\arrow["\theta", shorten <=2pt, shorten >=2pt, Rightarrow, from=1, to=2]
	\arrow["{\psi\circ\theta}", shorten <=3pt, shorten >=3pt, Rightarrow, from=4, to=3]
	\end{tikzcd}
</script>
</center>

由于函子的态射本身就是一簇态射定义的，所以定义函子间的态射合成也可以通过逐点定义：

$$
(\psi\circ\theta)_X=\left\{\psi_X\circ\theta_X:X\in Ob(\mathcal{C}^\prime)\right\}
$$

函子间的映射确实是态射最重要的就是看是否满足前面的交换图定义，纵合成的验证是trivial的。

#### 横合成
目标是找到下面的合成，合成后依然是函子的态射，使得前面的图\eqref{1}交换：

<center style="overflow:auto">
<script  type="text/tikz">
	\begin{tikzcd}
	{\mathcal{C}''} & {\mathcal{C}'} & {\mathcal{C}} & \Rightarrow & {\mathcal{C}''} && {\mathcal{C}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{F_2}"', bend right =50, from=1-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{F_1}", bend left =50, from=1-1, to=1-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{G_2}"', bend right =50, from=1-2, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{G_1}", bend left =50, from=1-2, to=1-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{G_2F_2}"', bend right =40, from=1-5, to=1-7]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{G_1F_1}", bend left =40, from=1-5, to=1-7]
	\arrow["\theta", shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
	\arrow["\psi", shorten <=3pt, shorten >=3pt, Rightarrow, from=3, to=2]
	\arrow["{\psi\circ\theta}", shorten <=3pt, shorten >=3pt, Rightarrow, from=5, to=4]
	\end{tikzcd}
</script>
</center>

根据

$$
\theta_X\in\mathrm{Hom}_{\mathcal{C}^\prime}(F_1X,F_2X),\quad F_1X,F_2X\in\mathcal{Ob}(\mathcal{C}^\prime),\quad\psi:G_1\to G_2
$$

可知下面图表交换：

$$
\begin{CD}
G_1F_1(X) @>\psi_{F_1X}>> G_2F_1(X)\\
@VG_1(\theta_X)VV @VVG_2(\theta_X)V\\
G_1F_2(X) @>>\psi_{F_2X}> G_2F_2(X)
\end{CD}
$$

上面交换图的对角合成$(\psi\circ\theta)_X:G_1F_1(X)\to G_2F_2(X)$就是要求的横合成。

下面来证明这一定义的自然性，因为$\theta$是自然变换，$G_1$是函子[^5]，所以下图左方块交换。右方块的交换类似上面定义$(\psi\circ\theta)_X$所作的交换图，只是把$F_1X,F_2X$换成了$F_2X,F_2Y$。

$$
\begin{CD}
G_1F_1(X) @>G_1\theta_X>> G_1F_2(X) @>\psi_{F_2X}>> G_2F_2(X)\\
@VG_1F_1fVV @VG_1F_2fVV @VVG_2F_2fV\\
G_1F_1(Y) @>G_1\theta_Y>> G_1F_2(Y) @>>\psi_{F_2Y}> G_2F_2(Y)
\end{CD}
$$

上面交换图水平方向箭头合成之后，把中间竖线拿掉，上下分别是$(\psi\circ\theta)_X$和$(\psi\circ\theta)_Y$，这正是\refeq{1}。

<p>对于任何一个函子，都可以定义到自身的恒等函子$\mathrm{id}_F$，其中$(\mathrm{id}_F)_X=\mathrm{id}_{FX}$。利用函子保恒等态射的性质，恒等函子与其它函子之间的合成规则可以简化。</p>

那么自然变换$\theta:F_1\to F_2$的逆就可以定义为满足

$$\psi\circ\theta=\mathrm{id}_{F_1}, \theta\circ\psi=\mathrm{id}_{F_2}$$

的自然变换$\psi:F_{2}\to F_{1}$，如果自然变换可逆，那么称两个函子同构，$\theta:F_{1}\stackrel{\sim}{\rightarrow}F_{2}$。不难发现可逆则逆唯一，且逆无非就是在范畴中逐点取逆：

$$
(\theta^{-1})_X:=(\theta_X)^{-1}:F_2X\stackrel{\sim}{\to}F_1X
$$

这也意味着$\theta$可逆当且仅当每一个$\theta_X$都可逆。这个时候我们称$\theta_{X}:F_{1}X\stackrel{\sim}{\to}F_{2}X$对$X$是自然同构，或典范同构。

另外，横纵合成是有结合律的，纵合成可以从逐点态射的结合律直接看出，下面来证明横合成之间的结合律。考虑下面的函子以及自然变换：

<center style="overflow:auto">
<script  type="text/tikz">
	\begin{tikzcd}
	 {\mathcal{C}'''} & {\mathcal{C}''} & {\mathcal{C}'} & {\mathcal{C}} 
	\arrow[""{name=0, anchor=center, inner sep=0}, "{F_2}"', bend right =50, from=1-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{F_1}", bend left =50, from=1-1, to=1-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{G_2}"', bend right =50, from=1-2, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{G_1}", bend left =50, from=1-2, to=1-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{H_2}"', bend right =50, from=1-3, to=1-4]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{H_1}", bend left =50, from=1-3, to=1-4]
	\arrow["\theta", shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
	\arrow["\psi", shorten <=3pt, shorten >=3pt, Rightarrow, from=3, to=2]
	\arrow["\phi", shorten <=3pt, shorten >=3pt, Rightarrow, from=5, to=4]
	\end{tikzcd}
</script>
</center>

根据$\phi$是自然变换可以看出下面交换图的正方形部分交换，所以整个图交换：

$$
\begin{CD}
HG_1F_1(X) @>>> H_1G_2F_1(X) @>>> H_1G_2F_2(X)\\
@. @VG_1(\theta_X)VV @VVG_2(\theta_X)V\\
@. H_2G_2F_1(X) @>>\psi_{F_2X}> H_2G_2F_2(X)
\end{CD}
$$

按照右下的方式合成给出$(\phi\circ(\psi\circ\theta))_{X}$，按照下右的方式给出$((\phi\circ\psi)\circ\theta)_X$，所以结合律成立。

对于图表：
<center style="overflow:auto">
<script  type="text/tikz">
	\begin{tikzcd}
	{\mathcal{C}_1} && {\mathcal{C}_2} && {\mathcal{C}_3}
	\arrow[""{name=0, anchor=center, inner sep=0}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, bend left=-50, from=1-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, bend left=50, from=1-1, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, from=1-3, to=1-5]
	\arrow[""{name=4, anchor=center, inner sep=0}, bend left=-50, from=1-3, to=1-5]
	\arrow[""{name=5, anchor=center, inner sep=0}, bend left=50, from=1-3, to=1-5]
	\arrow["\theta", shorten <=2pt, shorten >=2pt, Rightarrow, from=2, to=0]
	\arrow["\psi", shorten <=2pt, shorten >=2pt, Rightarrow, from=0, to=1]
	\arrow["{\theta'}", shorten <=2pt, shorten >=2pt, Rightarrow, from=5, to=3]
	\arrow["{\psi'}", shorten <=2pt, shorten >=2pt, Rightarrow, from=3, to=4]
	\end{tikzcd}
</script>
</center>
还有下面的互换律：

$$
\left(\psi'\underset{\text{纵}}\circ\theta'\right)\underset{\text{横}}\circ\left(\psi\underset{\text{纵}}\circ\theta\right)=\left(\psi'\underset{\text{横}}\circ\psi\right)\underset{\text{纵}}{\circ}\left(\theta'\underset{\text{横}}\circ\theta\right)
$$

这是在说只要最后得到的2-胞腔相同，不管中间过程，合成自然变换一定一致。

### 范畴间的等价与同构
如果$\mathcal{C_1},\mathcal{C_2}$上的函子$F:\mathcal{C_1}to\mathcal{C_2}$和函子$G:\mathcal{C_2}to\mathcal{C_1}$满足存在函子间的同构：

$$
\theta:FG\stackrel{\sim}{\to}\mathrm{id}_{\mathcal{C}_2}, \psi:GF\stackrel{\sim}{\to}\mathrm{id}_{\mathcal{C}_1}
$$

则称$G$是$F$的**拟逆函子**，并称$F$是$\mathcal{C_1}$到$\mathcal{C_2}$的**等价**。进一步如果：

$$
FG=\mathrm{id}_{\mathcal{C}_2}, GF=\mathrm{id}_{\mathcal{C}_1}
$$

那么$F$就是范畴间的**同构**，$G$是$F$的**逆**。

注意函子的逆存在则唯一，但是拟逆函子可以有很多个，他们之间可以差一个函子的同构，也就是说：
>若$G$和$G'$都是函子$F$的拟逆函子，则存在函子的同构$G\cong G'$
>

从经验上看，其实范畴的同构是最没用的东西，范畴间的等价才是最精妙的能够带来新的数学结构的东西。

## 函子范畴









# 幺半范畴


# 参考资料

关于范畴论，下面的几本书不错：
- 李文威，《代数学方法（基础架构）》
- Tom Leinster, *Basic Category Theoty*
- S. Mac Lane, *Categories for the Working Mathematician*, 2nd (GTM05)

# 注记
[^1]: 提到范畴的时候其实有一些关于集合论上很微妙的地方，这个微妙性可以通过引入格罗腾迪克宇宙将考虑的范畴都升级为$\mathcal{U}$范畴来避免。
[^2]: 这里有点滥用符号，实际上应该用$F^{ob},F^{mor}$区分
[^3]: 物理里面还有一个装逼的说法：路径积分是几何范畴到Hilbert空间组成的张量范畴的函子。
[^4]: 这是利用tikzJax渲染的，渲染可能会有点慢，请耐心等待并刷新
[^5]: 这里利用了前面说的函子作用在交换图上仍是交换图